{"ast":null,"code":"import _classCallCheck from\"C:/Users/\\u0414\\u0430\\u0440\\u044C\\u044F/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/\\u0414\\u0430\\u0440\\u044C\\u044F/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/createClass.js\";var Api=/*#__PURE__*/function(){function Api(_ref){var _this=this;var baseUrl=_ref.baseUrl,headers=_ref.headers;_classCallCheck(this,Api);this.addNewCard=function(data){return fetch(\"\".concat(_this._baseUrl,\"/cards\"),{method:\"POST\",headers:_this._headers,body:JSON.stringify({name:data.place,link:data.link})}).then(_this._checkResponse);};this._baseUrl=baseUrl;this._headers=headers;this._authorization=headers.authorization;}_createClass(Api,[{key:\"_checkResponse\",value:function _checkResponse(res){return res.ok?res.json():Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status));}},{key:\"getCard\",value:function getCard(){return fetch(\"\".concat(this._baseUrl,\"/cards\"),{method:\"GET\",headers:{authorization:this._authorization}}).then(this._checkResponse);}},{key:\"deleteCardItem\",value:function deleteCardItem(id){return fetch(\"\".concat(this._baseUrl,\"/cards/\").concat(id),{method:\"DELETE\",headers:{authorization:this._authorization}}).then(this._checkResponse);}},{key:\"getUserInfo\",value:function getUserInfo(){return fetch(\"\".concat(this._baseUrl,\"/users/me\"),{method:\"GET\",headers:{authorization:this._authorization}}).then(this._checkResponse);}},{key:\"getAppInfo\",value:function getAppInfo(){return Promise.all([this.getCard(),this.getUserInfo()]);}},{key:\"setUserInfo\",value:function setUserInfo(data){return fetch(\"\".concat(this._baseUrl,\"/users/me\"),{method:\"PATCH\",headers:this._headers,body:JSON.stringify({name:data.name,about:data.about})}).then(this._checkResponse);}},{key:\"setUserAvatar\",value:function setUserAvatar(data){return fetch(\"\".concat(this._baseUrl,\"/users/me/avatar\"),{method:\"PATCH\",headers:this._headers,body:JSON.stringify({avatar:data.avatar})}).then(this._checkResponse);}},{key:\"changeLikeCardStatus\",value:function changeLikeCardStatus(id,isLiked){if(!isLiked){return fetch(\"\".concat(this._baseUrl,\"/cards/\").concat(id,\"/likes\"),{method:\"PUT\",headers:{authorization:this._authorization}}).then(this._checkResponse);}else{return fetch(\"\".concat(this._baseUrl,\"/cards/\").concat(id,\"/likes\"),{method:\"DELETE\",headers:{authorization:this._authorization}}).then(this._checkResponse);}}}]);return Api;}();var api=new Api({baseUrl:\"https://mesto.nomoreparties.co/v1/cohort-66\",headers:{authorization:\"5b688d3d-7c46-4df8-90ad-ba72a9d9eac1\",\"Content-Type\":\"application/json\"}});export default api;","map":{"version":3,"names":["Api","_ref","_this","baseUrl","headers","_classCallCheck","addNewCard","data","fetch","concat","_baseUrl","method","_headers","body","JSON","stringify","name","place","link","then","_checkResponse","_authorization","authorization","_createClass","key","value","res","ok","json","Promise","reject","status","getCard","deleteCardItem","id","getUserInfo","getAppInfo","all","setUserInfo","about","setUserAvatar","avatar","changeLikeCardStatus","isLiked","api"],"sources":["C:/Users/Дарья/dev/react-mesto-auth/src/utils/api.js"],"sourcesContent":["class Api {\r\n  constructor({ baseUrl, headers }) {\r\n    this._baseUrl = baseUrl;\r\n    this._headers = headers;\r\n    this._authorization = headers.authorization;\r\n  }\r\n\r\n  _checkResponse(res) {\r\n    return res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`);\r\n  }\r\n\r\n  getCard() {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        authorization: this._authorization,\r\n      },\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  addNewCard = (data) => {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: data.place,\r\n        link: data.link,\r\n      }),\r\n    }).then(this._checkResponse);\r\n  };\r\n\r\n  deleteCardItem(id) {\r\n    return fetch(`${this._baseUrl}/cards/${id}`, {\r\n      method: \"DELETE\",\r\n      headers: {\r\n        authorization: this._authorization,\r\n      },\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  getUserInfo() {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        authorization: this._authorization,\r\n      },\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  getAppInfo() {\r\n    return Promise.all([this.getCard(), this.getUserInfo()]);\r\n  }\r\n\r\n  setUserInfo(data) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: \"PATCH\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: data.name,\r\n        about: data.about,\r\n      }),\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  setUserAvatar(data) {\r\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n      method: \"PATCH\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        avatar: data.avatar,\r\n      }),\r\n    }).then(this._checkResponse);\r\n  }\r\n\r\n  changeLikeCardStatus(id, isLiked) {\r\n    if (!isLiked) {\r\n      return fetch(`${this._baseUrl}/cards/${id}/likes`, {\r\n        method: \"PUT\",\r\n        headers: {\r\n          authorization: this._authorization,\r\n        },\r\n      }).then(this._checkResponse);\r\n    } else {\r\n      return fetch(`${this._baseUrl}/cards/${id}/likes`, {\r\n        method: \"DELETE\",\r\n        headers: {\r\n          authorization: this._authorization,\r\n        },\r\n      }).then(this._checkResponse);\r\n    }\r\n  }\r\n}\r\n\r\nconst api = new Api({\r\n  baseUrl: \"https://mesto.nomoreparties.co/v1/cohort-66\",\r\n  headers: {\r\n    authorization: \"5b688d3d-7c46-4df8-90ad-ba72a9d9eac1\",\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n});\r\n\r\nexport default api;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}